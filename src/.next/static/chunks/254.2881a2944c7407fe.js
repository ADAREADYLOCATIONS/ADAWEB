"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{9254:function(e,o,t){t.r(o),t.d(o,{default:function(){return he}});var r=t(3827),i=t(4090),n=t(2259),s=t(304),a=t(5211),l=t(9835),c=t(3894),d=t(6612),h=t(7372),u=t(470),p=t(124),x=t(3206),m=t(8205),b=t(144),g=t(3995),f=t(9468),y=t(8562),j=t(1243);function v(e){let{onSearch:o,onLocationRequest:t,onAddressSelect:n,fullWidth:c=!1}=e;const[d,v]=(0,i.useState)(""),[Z,w]=(0,i.useState)([]),[k,C]=(0,i.useState)(!1),[S,I]=(0,i.useState)(null),[_]=(0,i.useState)(window.innerWidth<600),F=(0,i.useCallback)((async e=>{if(!e||e.length<3)return void w([]);const o="pk.eyJ1IjoiYWRhYWxyZWFkeWxvY2F0aW9ucyIsImEiOiJjbTRpcms1ODEwNWN2MmlwejJsZnRwbTh1In0.h1-mYaPDVZPGrUrJYEfaCA";C(!0),I(null);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?")+"access_token=".concat(o,"&")+"types=address,poi&country=us,pr,as,gu,mp,vi&limit=5");if(!t.ok)throw new Error("Search failed");const r=await t.json();w(r.features||[])}catch(t){console.error("Error searching locations:",t),I("Search failed. Please try again."),w([])}finally{C(!1)}}),[]);(0,i.useEffect)((()=>{const e=setTimeout((()=>{F(d)}),300);return()=>clearTimeout(e)}),[d,F]);return(0,r.jsx)(h.d,{onClickAway:()=>w([]),children:(0,r.jsxs)(s.Z,{sx:{position:"fixed",top:16,left:"50%",transform:"translateX(-50%)",width:c?"100%":{xs:"90%",sm:"600px"},px:2,zIndex:1e3},children:[(0,r.jsxs)(u.Z,{component:"form",onSubmit:e=>{e.preventDefault(),o(d)},elevation:3,sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%",border:"2px solid",borderColor:"primary.main",borderRadius:2,bgcolor:"background.paper","&:hover":{borderColor:"primary.dark"}},children:[(0,r.jsx)(p.ZP,{sx:{ml:1,flex:1,fontSize:{xs:"0.9rem",sm:"1rem"},"& input":{padding:{xs:"8px 0",sm:"8px 0"}},color:"text.primary"},placeholder:_?"Search locations...":"Search for a location in the United States...",value:d,onChange:e=>v(e.target.value),autoComplete:"off"}),k?(0,r.jsx)(a.Z,{size:24,sx:{mx:1}}):(0,r.jsx)(x.Z,{type:"submit",sx:{p:"10px"},children:(0,r.jsx)(y.Z,{})}),(0,r.jsx)(s.Z,{sx:{height:24,mx:.5,borderLeft:1,borderColor:"divider"}}),(0,r.jsx)(m.Z,{title:"Use current location",children:(0,r.jsx)(x.Z,{onClick:t,sx:{p:"10px"},children:(0,r.jsx)(j.Z,{})})})]}),Z.length>0&&(0,r.jsx)(u.Z,{elevation:3,sx:{mt:1,maxHeight:400,overflow:"auto",width:"100%",bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:(0,r.jsx)(b.Z,{children:Z.map((e=>(0,r.jsx)(g.ZP,{onClick:()=>(e=>{n&&n(e.place_name,e.center[1],e.center[0]),v(e.place_name),w([])})(e),sx:{py:2,px:3,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:"action.hover",transform:"translateX(4px)"}},children:(0,r.jsx)(f.Z,{primary:e.place_name,primaryTypographyProps:{sx:{color:"text.primary",fontWeight:500}}})},e.id)))})}),S&&(0,r.jsx)(l.Z,{color:"error",variant:"body2",sx:{mt:1,textAlign:"center"},children:S})]})})}var Z=t(6516),w=t(9401),k=t(1736),C=t(9398),S=t(3655);function I(){const[e,o]=(0,i.useState)(!1),[t,n]=(0,i.useState)(!1),[a,c]=(0,i.useState)(!1),d=(0,i.useRef)(),h=(0,i.useCallback)((()=>{d.current&&clearTimeout(d.current),e||a||(d.current=setTimeout((()=>{n(!1)}),3e3))}),[e,a]);(0,i.useEffect)((()=>(n(!0),h(),()=>{d.current&&clearTimeout(d.current)})),[h]);return(0,r.jsxs)(s.Z,{sx:{position:"fixed",bottom:80,left:16,zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"flex-start"},onMouseEnter:()=>{c(!0),n(!0)},onMouseLeave:()=>{c(!1),h()},children:[!t&&(0,r.jsx)(x.Z,{onClick:()=>n(!0),sx:{bgcolor:"background.paper",boxShadow:2,color:"primary.main","&:hover":{bgcolor:"background.paper",color:"primary.light"}},children:(0,r.jsx)(C.Z,{})}),(0,r.jsx)(Z.Z,{in:t,children:(0,r.jsxs)(u.Z,{elevation:3,sx:{p:3,bgcolor:"background.paper",backdropFilter:"blur(4px)",width:{xs:280,sm:320},border:"1px solid",borderColor:"divider",borderRadius:2},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,r.jsx)(l.Z,{variant:"h6",sx:{flex:1,fontSize:"1rem",fontWeight:600,color:"text.primary"},children:"Accessibility Levels"}),(0,r.jsx)(x.Z,{size:"small",onClick:()=>{o(!e),n(!0)},sx:{mr:.5,color:e?"primary.main":"text.secondary","&:hover":{color:"primary.main"}},children:e?(0,r.jsx)(w.Z,{}):(0,r.jsx)(k.Z,{})}),(0,r.jsx)(x.Z,{size:"small",onClick:()=>n(!1),sx:{color:"text.secondary","&:hover":{color:"primary.main"}},children:(0,r.jsx)(S.Z,{})})]}),[{level:"High",color:"#4CAF50",description:"Fully accessible, no barriers"},{level:"Medium",color:"#FFC107",description:"Partially accessible, some barriers"},{level:"Low",color:"#F44336",description:"Limited accessibility, significant barriers"}].map((e=>{let{level:o,color:t,description:i}=e;return(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"flex-start",mb:2,"&:last-child":{mb:0}},children:[(0,r.jsx)(s.Z,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:t,mr:2,mt:.5,flexShrink:0,border:"2px solid",borderColor:"background.paper",boxShadow:1}}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(l.Z,{variant:"subtitle2",sx:{fontWeight:600,color:"text.primary"},children:o}),(0,r.jsx)(l.Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.85rem",lineHeight:1.4},children:i})]})]},o)}))]})})]})}var _=t(3850),F=t(6892),z=t(8645),R=t(8307),E=t(3719),N=t(7919),W=t(3022),P=t(1389),A=t(8503);function T(e){let{onFilterChange:o}=e;const[t,n]=(0,i.useState)(!1),[a,c]=(0,i.useState)([]),d=[{id:"high",label:"Fully Accessible",icon:(0,r.jsx)(N.Z,{color:"success"})},{id:"medium",label:"Partially Accessible",icon:(0,r.jsx)(N.Z,{color:"warning"})},{id:"low",label:"Limited Accessibility",icon:(0,r.jsx)(N.Z,{color:"error"})},{id:"no-steps",label:"No Steps",icon:(0,r.jsx)(A.Z,{})},{id:"restroom",label:"Accessible Restroom",icon:(0,r.jsx)(W.Z,{})},{id:"service-animal",label:"Service Animal Friendly",icon:(0,r.jsx)(P.Z,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{elevation:3,sx:{position:"absolute",top:16,right:16,zIndex:1,borderRadius:"50px",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"scale(1.05)",boxShadow:6}},children:(0,r.jsx)(_.Z,{badgeContent:a.length,color:"primary",sx:{"& .MuiBadge-badge":{right:5,top:5}},children:(0,r.jsx)(x.Z,{onClick:()=>n(!0),sx:{p:2,color:"primary.main","&:hover":{bgcolor:"rgba(25, 118, 210, 0.04)"}},children:(0,r.jsx)(E.Z,{sx:{fontSize:28}})})})}),(0,r.jsx)(F.ZP,{anchor:"right",open:t,onClose:()=>n(!1),PaperProps:{sx:{width:{xs:"100%",sm:320},borderTopLeftRadius:{xs:16,sm:0},borderBottomLeftRadius:{xs:16,sm:0}}},children:(0,r.jsxs)(s.Z,{sx:{width:"100%",pt:3,pb:2},children:[(0,r.jsx)(l.Z,{variant:"h6",sx:{px:3,pb:2},children:"Filter Locations"}),(0,r.jsx)(b.Z,{children:d.map((e=>(0,r.jsxs)(g.ZP,{sx:{transition:"background-color 0.2s","&:hover":{bgcolor:"action.hover"}},children:[(0,r.jsx)(z.Z,{edge:"start",checked:-1!==a.indexOf(e.id),onChange:()=>(e=>{const t=a.indexOf(e),r=[...a];-1===t?r.push(e):r.splice(t,1),c(r),o(r)})(e.id),sx:{"&.Mui-checked":{color:"primary.main"}}}),(0,r.jsx)(R.Z,{sx:{minWidth:40},children:e.icon}),(0,r.jsx)(f.Z,{primary:e.label,primaryTypographyProps:{sx:{fontWeight:a.includes(e.id)?600:400}}})]},e.id)))})]})})]})}var J=t(5693),L=t(815),Y=t(8545),M=t(7907);function O(){const e=(0,M.useRouter)();return(0,r.jsx)(s.Z,{sx:{position:"fixed",bottom:32,right:32,zIndex:2e3},children:(0,r.jsx)(m.Z,{title:"Add New Location",placement:"left",children:(0,r.jsx)(Y.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:15},children:(0,r.jsx)(J.Z,{color:"primary","aria-label":"add location",onClick:()=>e.push("/add"),size:"large",sx:{width:64,height:64,background:e=>"linear-gradient(45deg, \n                ".concat(e.palette.primary.dark," 0%,\n                ").concat(e.palette.primary.main," 100%\n              )"),boxShadow:e=>"0 4px 20px ".concat(e.palette.primary.main,"40"),border:"2px solid",borderColor:"primary.light","&:hover":{background:e=>"linear-gradient(45deg, \n                  ".concat(e.palette.primary.main," 0%,\n                  ").concat(e.palette.primary.light," 100%\n                )")}},children:(0,r.jsx)(L.Z,{sx:{fontSize:32}})})})})})}var q=t(895),D=t(4784),X=t(6285),V=t(2177);function U(e){switch(e){case"high":return"#4CAF50";case"medium":return"#FFC107";case"low":return"#F44336";default:return"#757575"}}var H=t(3845),B=t(4728),G=t(368),Q=t(36),K=t(512),$=t(7147),ee=t(2508),oe=t(2495),te=t(9309),re=t(1291),ie=t(4632),ne=t(8745);function se(e){let{open:o,onClose:t,photos:n,locationName:a}=e;const[c,d]=(0,i.useState)(0),h=(0,G.Z)();return(0,r.jsxs)(Q.Z,{open:o,onClose:t,maxWidth:!1,"aria-labelledby":"photo-gallery-title",PaperProps:{sx:{width:"90vw",maxWidth:1600,height:"90vh",bgcolor:"background.paper",borderRadius:3,overflow:"hidden"}},children:[(0,r.jsxs)(K.Z,{id:"photo-gallery-title",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider",p:2,bgcolor:"background.paper"},children:[(0,r.jsxs)(l.Z,{variant:"h6",component:"div",sx:{fontWeight:600},children:[a," - Photo ",c+1," of ",n.length]}),(0,r.jsx)(x.Z,{onClick:t,sx:{color:"text.secondary","&:hover":{color:"text.primary"}},"aria-label":"Close gallery",children:(0,r.jsx)(te.Z,{})})]}),(0,r.jsx)($.Z,{sx:{p:0,display:"flex",height:"calc(100% - 64px)"},children:(0,r.jsxs)(ee.ZP,{container:!0,sx:{height:"100%"},children:[(0,r.jsx)(ee.ZP,{item:!0,xs:12,md:9,sx:{position:"relative"},children:(0,r.jsxs)(s.Z,{sx:{height:"100%",bgcolor:(0,oe.Fq)(h.palette.common.black,.95),display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(ne.M,{mode:"wait",children:(0,r.jsx)(Y.E.img,{src:n[c],alt:"".concat(a," photo ").concat(c+1),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",padding:"24px"}},n[c])}),n.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{onClick:()=>{d((e=>0===e?n.length-1:e-1))},sx:{position:"absolute",left:16,bgcolor:(0,oe.Fq)(h.palette.common.black,.6),color:"white","&:hover":{bgcolor:(0,oe.Fq)(h.palette.common.black,.8),transform:"scale(1.1)"},transition:"all 0.2s ease-in-out"},"aria-label":"Previous photo",children:(0,r.jsx)(re.Z,{})}),(0,r.jsx)(x.Z,{onClick:()=>{d((e=>e===n.length-1?0:e+1))},sx:{position:"absolute",right:16,bgcolor:(0,oe.Fq)(h.palette.common.black,.6),color:"white","&:hover":{bgcolor:(0,oe.Fq)(h.palette.common.black,.8),transform:"scale(1.1)"},transition:"all 0.2s ease-in-out"},"aria-label":"Next photo",children:(0,r.jsx)(ie.Z,{})})]})]})}),(0,r.jsx)(ee.ZP,{item:!0,xs:12,md:3,sx:{height:"100%",borderLeft:"1px solid",borderColor:"divider",overflow:"auto"},children:(0,r.jsx)(s.Z,{sx:{p:2},children:(0,r.jsx)(ee.ZP,{container:!0,spacing:1,children:n.map(((e,o)=>(0,r.jsx)(ee.ZP,{item:!0,xs:6,children:(0,r.jsx)(Y.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(s.Z,{onClick:()=>d(o),sx:{position:"relative",paddingTop:"100%",borderRadius:1,overflow:"hidden",cursor:"pointer",border:"2px solid",borderColor:o===c?"primary.main":"transparent"},children:(0,r.jsx)("img",{src:e,alt:"Thumbnail ".concat(o+1),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})})},o)))})})})]})})]})}function ae(e){let{location:o}=e;var t;const[n,a]=(0,i.useState)(!1),c=function(e){const o=[];return!1===e.has_steps&&o.push("No steps at entrance"),e.has_elevator&&o.push("Has elevator"),e.has_restroom&&e.is_restroom_accessible&&o.push("Accessible restroom available"),e.is_dog_friendly&&o.push("Service animals welcome"),o}(o),d=(0,V.E)(o),h=d&&Array.isArray(o.photos)&&o.photos.length>0;return(0,r.jsxs)(u.Z,{sx:{width:400,maxWidth:"90vw",borderRadius:2,overflow:"visible",boxShadow:e=>"0 8px 32px ".concat(e.palette.common.black,"20"),transform:"translateY(30%)"},children:[(0,r.jsx)(s.Z,{sx:{p:3},children:(0,r.jsxs)(q.Z,{spacing:2,children:[(0,r.jsx)(l.Z,{variant:"h6",component:"div",sx:{fontWeight:600},children:o.name}),(0,r.jsxs)(l.Z,{variant:"body2",color:"text.secondary",children:[o.address,o.unit&&" (".concat(o.unit,")")]}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(D.Z,{label:(null===(t=o.accessibility_level)||void 0===t?void 0:t.toUpperCase())||"UNKNOWN",sx:{bgcolor:U(o.accessibility_level),color:"white",mb:1},size:"small"}),o.description&&(0,r.jsx)(l.Z,{variant:"body2",sx:{mt:1},children:o.description})]}),c.length>0&&(0,r.jsx)(q.Z,{spacing:1,children:c.map(((e,o)=>(0,r.jsxs)(l.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",color:"text.secondary"},children:[(0,r.jsx)(s.Z,{component:"span",sx:{display:"inline-block",width:6,height:6,borderRadius:"50%",bgcolor:"success.main",mr:1,flexShrink:0}}),e]},o)))}),d&&(0,r.jsx)(s.Z,{sx:{mt:1},children:h?(0,r.jsxs)(X.Z,{startIcon:(0,r.jsx)(H.Z,{}),onClick:()=>a(!0),variant:"outlined",color:"primary",fullWidth:!0,sx:{borderRadius:2,textTransform:"none","&:hover":{bgcolor:"primary.dark",color:"white"}},children:["View Photos (",o.photos.length,")"]}):(0,r.jsxs)(s.Z,{sx:{p:2,bgcolor:"background.default",borderRadius:2,textAlign:"center"},children:[(0,r.jsx)(B.Z,{sx:{fontSize:40,color:"text.secondary",mb:1}}),(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:"No photos available yet"})]})})]})}),h&&(0,r.jsx)(se,{open:n,onClose:()=>a(!1),photos:o.photos,locationName:o.name})]})}var le=t(6207);function ce(e){let{location:o,onClick:t}=e;const{count:n}=(0,le.F)(o.id),[a,l]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{l(n>0)}),[n]),(0,r.jsx)(_.Z,{badgeContent:a?n:0,color:"primary",overlap:"circular",invisible:!a,sx:{"& .MuiBadge-badge":{bgcolor:"primary.main",color:"white",minWidth:20,height:20,fontSize:"0.75rem"}},children:(0,r.jsx)(s.Z,{onClick:e=>{e.stopPropagation(),t()},sx:{width:24,height:24,bgcolor:U(o.accessibility_level),borderRadius:"50%",border:"3px solid white",boxShadow:2,cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.2)"}}})})}t(7367);const de={latitude:40.7128,longitude:-74.006,zoom:12,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}};function he(){const{viewState:e,setViewState:o,handleLocationRequest:t,handleAddressSelect:h}=function(e){let{initialViewState:o}=e;const[t,r]=(0,i.useState)(o),n=(0,i.useCallback)((()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((e=>{r((o=>({...o,latitude:e.coords.latitude,longitude:e.coords.longitude,zoom:14,transitionDuration:1e3})))}),(e=>{throw console.error("Error getting location:",e),new Error("Failed to get your location")}))}),[]),s=(0,i.useCallback)(((e,o,t)=>{r((e=>({...e,latitude:o,longitude:t,zoom:16,transitionDuration:1e3})))}),[]);return{viewState:t,setViewState:r,handleLocationRequest:n,handleAddressSelect:s}}({initialViewState:de}),{filters:u,setFilters:p,filterLocations:x}=function(){const[e,o]=(0,i.useState)([]),t=(0,i.useCallback)((o=>0===e.length?o:o.filter((o=>e.every((e=>{switch(e){case"high":return"high"===o.accessibility_level;case"medium":return"medium"===o.accessibility_level;case"low":return"low"===o.accessibility_level;case"no-steps":return!o.has_steps;case"restroom":return o.has_restroom&&o.is_restroom_accessible;case"service-animal":return o.is_dog_friendly;default:return!0}}))))),[e]);return{filters:e,setFilters:o,filterLocations:t}}(),[m,b]=(0,i.useState)([]),[g,f]=(0,i.useState)(null),[y,j]=(0,i.useState)(!0),[Z,w]=(0,i.useState)(null),k=(0,i.useCallback)((async()=>{try{j(!0),w(null);const e=await(0,d.z4)();b(e)}catch(e){console.error("Error fetching locations:",e),w("Failed to load locations. Please try again later.")}finally{j(!1)}}),[]);(0,i.useEffect)((()=>{k()}),[k]);const C=(0,i.useCallback)((()=>{}),[]),S=x(m);return y?(0,r.jsxs)(s.Z,{sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2,bgcolor:"background.default"},children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(l.Z,{children:"Loading map..."})]}):(0,r.jsxs)(s.Z,{sx:{height:"100vh",width:"100vw",position:"relative"},children:[Z&&(0,r.jsx)(c.Z,{severity:"error",onClose:()=>w(null),sx:{position:"absolute",top:16,left:"50%",transform:"translateX(-50%)",zIndex:1e3,maxWidth:"90%",width:"auto"},children:Z}),(0,r.jsx)(v,{onSearch:C,onLocationRequest:t,onAddressSelect:h}),(0,r.jsx)(T,{onFilterChange:p}),(0,r.jsx)(I,{}),(0,r.jsxs)(n.ZP,{...e,onMove:e=>o(e.viewState),mapStyle:"mapbox://styles/mapbox/dark-v11",mapboxAccessToken:"pk.eyJ1IjoiYWRhYWxyZWFkeWxvY2F0aW9ucyIsImEiOiJjbTRpcms1ODEwNWN2MmlwejJsZnRwbTh1In0.h1-mYaPDVZPGrUrJYEfaCA",style:{width:"100%",height:"100%"},children:[S.map((e=>(0,r.jsx)(n.Jx,{latitude:e.latitude,longitude:e.longitude,children:(0,r.jsx)(ce,{location:e,onClick:()=>{o((o=>({...o,latitude:e.latitude,longitude:e.longitude,zoom:16,transitionDuration:500}))),f(e)}})},e.id))),g&&(0,r.jsx)(n.GI,{latitude:g.latitude,longitude:g.longitude,onClose:()=>f(null),closeButton:!0,closeOnClick:!1,anchor:"top",offset:[0,-20],className:"location-popup",children:(0,r.jsx)(ae,{location:g})})]}),(0,r.jsx)(O,{})]})}},6207:function(e,o,t){t.d(o,{F:function(){return n}});var r=t(4090),i=t(1682);function n(e){const[o,t]=(0,r.useState)(0),[n,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null),c=(0,r.useCallback)((async()=>{try{s(!0),l(null);const{count:o,error:r}=await i.O.from("location_photos").select("*",{count:"exact",head:!0}).eq("location_id",e);if(r)throw r;t(o||0)}catch(o){console.error("Error fetching photo count:",o),l("Failed to load photo count")}finally{s(!1)}}),[e]);return(0,r.useEffect)((()=>{c()}),[c]),{count:o,loading:n,error:a,refetch:c}}},1682:function(e,o,t){t.d(o,{O:function(){return n}});const r="https://vklckuwinkmvefztvawp.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrbGNrdXdpbmttdmVmenR2YXdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM4NDk3NzcsImV4cCI6MjA0OTQyNTc3N30.aWC5z7r3YCUVG617ZUfZRrBgSY43jvq46H1ZE7SYcRg";const n=(0,t(9377).eI)(r,i,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"}})},6612:function(e,o,t){t.d(o,{Dx:function(){return c},Hm:function(){return a},RU:function(){return n},XY:function(){return l},z4:function(){return s}});const r="https://vklckuwinkmvefztvawp.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrbGNrdXdpbmttdmVmenR2YXdwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMzg0OTc3NywiZXhwIjoyMDQ5NDI1Nzc3fQ.jIoUbi5DwqIMtpCuQxybgN4SZ74MAfXi5kr7sLkxMY4";const n=(0,t(9377).eI)(r,i,{db:{schema:"public"}});async function s(){try{const{data:e,error:o}=await n.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("status","approved").order("created_at",{ascending:!1});if(o)throw console.error("Error fetching locations:",o),o;return(null===e||void 0===e?void 0:e.map((e=>{var o;return{...e,photos:(null===(o=e.location_photos)||void 0===o?void 0:o.map((e=>e.url)))||[]}})))||[]}catch(e){throw console.error("Error in fetchLocations:",e),e}}async function a(e){try{var o;const{data:t,error:r}=await n.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("id",e).single();if(r)throw r;if(!t)throw new Error("Location not found");return{...t,photos:(null===(o=t.location_photos)||void 0===o?void 0:o.map((e=>e.url)))||[]}}catch(t){throw console.error("Error fetching location:",t),t}}async function l(e,o){try{const{photos:t,location_photos:r,...i}=o,{error:s}=await n.from("locations").update(i).eq("id",e).eq("status","approved");if(s)throw s;return!0}catch(t){throw console.error("Error updating location:",t),t}}async function c(e){try{const{data:o,error:t}=await n.from("pending_locations").insert([{...e,status:"pending",submitted_at:(new Date).toISOString()}]).select().single();if(t)throw t;return o}catch(o){throw console.error("Error adding location:",o),o}}},2177:function(e,o,t){function r(e){return"approved"===e.status}function i(e){return"pending"===e.status}t.d(o,{C:function(){return i},E:function(){return r}})}}]);