(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{1615:function(e,t,n){Promise.resolve().then(n.bind(n,7274))},7274:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ce}});var o=n(3827),r=n(4090),a=n(7907),i=n(304),s=n(5211),l=n(3894),c=n(2177),d=n(6612),u=n(36),h=n(9835),p=n(3206),_=n(6093),v=n(444),m=n(2110),b=n(3167),x=n(4174),f=n(4686),g=n(1869),y=n(3346),w=n(5135),Z=n(8836),j=n(9048),k=n(6761),S=n(533);function C(e){return(0,S.ZP)("MuiLinearProgress",e)}(0,k.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);function I(){const e=(0,_._)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"]);return I=function(){return e},e}function B(){const e=(0,_._)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"]);return B=function(){return e},e}function N(){const e=(0,_._)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"]);return N=function(){return e},e}function P(){const e=(0,_._)(["\n    animation: "," 3s infinite linear;\n  "]);return P=function(){return e},e}function D(){const e=(0,_._)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]);return D=function(){return e},e}function E(){const e=(0,_._)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]);return E=function(){return e},e}const L=["className","color","value","valueBuffer","variant"];let M,R,z,W,q,A;const F=(0,f.F4)(M||(M=I())),T=(0,f.F4)(R||(R=B())),Y=(0,f.F4)(z||(z=N())),O=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?(0,g.$n)(e.palette[t].main,.62):(0,g._j)(e.palette[t].main,.5),J=(0,Z.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat((0,w.Z)(n.color))],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,m.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:O(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),X=(0,Z.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t["dashedColor".concat((0,w.Z)(n.color))]]}})((e=>{let{ownerState:t,theme:n}=e;const o=O(n,t.color);return(0,m.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(o," 0%, ").concat(o," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,f.iv)(W||(W=P()),Y)),U=(0,Z.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t["barColor".concat((0,w.Z)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,m.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,f.iv)(q||(q=D()),F)})),V=(0,Z.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t["barColor".concat((0,w.Z)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,m.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:O(n,t.color),transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,f.iv)(A||(A=E()),T)}));var H=r.forwardRef((function(e,t){const n=(0,j.i)({props:e,name:"MuiLinearProgress"}),{className:r,color:a="primary",value:i,valueBuffer:s,variant:l="indeterminate"}=n,c=(0,v.Z)(n,L),d=(0,m.Z)({},n,{color:a,variant:l}),u=(e=>{const{classes:t,variant:n,color:o}=e,r={root:["root","color".concat((0,w.Z)(o)),n],dashed:["dashed","dashedColor".concat((0,w.Z)(o))],bar1:["bar","barColor".concat((0,w.Z)(o)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&"barColor".concat((0,w.Z)(o)),"buffer"===n&&"color".concat((0,w.Z)(o)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,x.Z)(r,C,t)})(d),h=(0,y.V)(),p={},_={bar1:{},bar2:{}};if("determinate"===l||"buffer"===l)if(void 0!==i){p["aria-valuenow"]=Math.round(i),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let e=i-100;h&&(e=-e),_.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===l)if(void 0!==s){let e=(s||0)-100;h&&(e=-e),_.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,o.jsxs)(J,(0,m.Z)({className:(0,b.Z)(u.root,r),ownerState:d,role:"progressbar"},p,{ref:t},c,{children:["buffer"===l?(0,o.jsx)(X,{className:u.dashed,ownerState:d}):null,(0,o.jsx)(U,{className:u.bar1,ownerState:d,style:_.bar1}),"determinate"===l?null:(0,o.jsx)(V,{className:u.bar2,ownerState:d,style:_.bar2})]}))})),G=n(470),Q=n(592),$=n(2757),K=n(7605),ee=n(7147),te=n(9309),ne=n(895),oe=n(8883),re=n(144),ae=n(3995),ie=n(9468),se=n(6285);function le(e){let{onNext:t,onBack:n,initialData:a}=e;const[c,d]=(0,r.useState)((null===a||void 0===a?void 0:a.name)||""),[u,p]=(0,r.useState)(""),[_,v]=(0,r.useState)((null===a||void 0===a?void 0:a.address)||""),[m,b]=(0,r.useState)((null===a||void 0===a?void 0:a.unit)||""),[x,f]=(0,r.useState)((null===a||void 0===a?void 0:a.latitude)||null),[g,y]=(0,r.useState)((null===a||void 0===a?void 0:a.longitude)||null),[w,Z]=(0,r.useState)([]),[j,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[I,B]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=setTimeout((async()=>{if(!u||u.length<3)return void Z([]);const e="pk.eyJ1IjoiYWRhYWxyZWFkeWxvY2F0aW9ucyIsImEiOiJjbTRpcms1ODEwNWN2MmlwejJsZnRwbTh1In0.h1-mYaPDVZPGrUrJYEfaCA";C(!0),B(null);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(u),".json?")+"access_token=".concat(e,"&")+"types=address,poi&country=us,pr,as,gu,mp,vi&limit=5");if(!t.ok)throw new Error("Search failed");const n=await t.json();Z(n.features||[]),k(!0)}catch(t){console.error("Error searching locations:",t),B("Search failed. Please try again."),Z([])}finally{C(!1)}}),300);return()=>clearTimeout(e)}),[u]);return(0,o.jsxs)(ne.Z,{spacing:4,children:[I&&(0,o.jsx)(l.Z,{severity:"error",onClose:()=>B(null),children:I}),(0,o.jsx)(oe.Z,{label:"Location Name",value:c,onChange:e=>d(e.target.value),fullWidth:!0,required:!0,placeholder:"e.g., Central Park Visitor Center"}),(0,o.jsxs)(i.Z,{sx:{position:"relative"},children:[(0,o.jsx)(oe.Z,{label:"Search Address",value:u,onChange:e=>p(e.target.value),fullWidth:!0,placeholder:"Start typing to search...",InputProps:{endAdornment:S&&(0,o.jsx)(s.Z,{size:20})}}),j&&w.length>0&&(0,o.jsx)(G.Z,{sx:{position:"absolute",top:"100%",left:0,right:0,mt:1,maxHeight:300,overflow:"auto",zIndex:1e3,borderRadius:1,boxShadow:3},children:(0,o.jsx)(re.Z,{children:w.map((e=>(0,o.jsx)(ae.ZP,{onClick:()=>(e=>{v(e.place_name),f(e.center[1]),y(e.center[0]),p(""),k(!1)})(e),sx:{py:2,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},children:(0,o.jsx)(ie.Z,{primary:e.place_name})},e.id)))})})]}),_&&(0,o.jsxs)(G.Z,{sx:{p:3,bgcolor:"background.default",borderRadius:2},children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Selected Address"}),(0,o.jsx)(h.Z,{variant:"body1",gutterBottom:!0,children:_}),(0,o.jsx)(oe.Z,{label:"Unit/Suite (Optional)",value:m,onChange:e=>b(e.target.value),fullWidth:!0,sx:{mt:2},placeholder:"e.g., Apt 4B, Suite 200"})]}),(0,o.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[n&&(0,o.jsx)(se.Z,{onClick:n,children:"Back"}),(0,o.jsx)(se.Z,{variant:"contained",onClick:()=>{c.trim()?_.trim()?x&&g?t({name:c,address:_,unit:m,latitude:x,longitude:g}):B("Please select a valid address from the suggestions"):B("Please select an address"):B("Please enter a location name")},disabled:!c||!_||!x||!g,children:"Next"})]})]})}var ce=n(1848),de=n(6245),ue=n(7640),he=n(8148);function pe(e){let{onNext:t,onBack:n,initialData:a}=e;const[s,l]=(0,r.useState)((null===a||void 0===a?void 0:a.accessibility_level)||"high"),[c,d]=(0,r.useState)((null===a||void 0===a?void 0:a.description)||"");return(0,o.jsxs)(ne.Z,{spacing:3,children:[(0,o.jsx)(h.Z,{variant:"body1",color:"text.secondary",children:"Tell us about the accessibility features of this location."}),(0,o.jsxs)(ce.Z,{component:"fieldset",children:[(0,o.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,children:"Overall Accessibility Level"}),(0,o.jsxs)(de.Z,{value:s,onChange:e=>l(e.target.value),children:[(0,o.jsx)(ue.Z,{value:"high",control:(0,o.jsx)(he.Z,{}),label:"Fully accessible (no barriers)"}),(0,o.jsx)(ue.Z,{value:"medium",control:(0,o.jsx)(he.Z,{}),label:"Partially accessible (some barriers)"}),(0,o.jsx)(ue.Z,{value:"low",control:(0,o.jsx)(he.Z,{}),label:"Limited accessibility (significant barriers)"})]})]}),(0,o.jsx)(oe.Z,{label:"Accessibility Description",value:c,onChange:e=>d(e.target.value),multiline:!0,rows:3,fullWidth:!0,placeholder:"Describe the accessibility features (e.g., ramps, automatic doors, etc.)"}),(0,o.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,o.jsx)(se.Z,{onClick:n,children:"Back"}),(0,o.jsx)(se.Z,{variant:"contained",onClick:()=>{t({accessibility_level:s,description:c})},children:"Next"})]})]})}var _e=n(8416),ve=n(4059),me=n(8503),be=n(1690),xe=n(4065);const fe=[{value:24,label:'24"'},{value:32,label:'32"'},{value:36,label:'36"'},{value:42,label:'42"'}];function ge(e){let{onNext:t,onBack:n,initialData:a}=e;const[s,l]=(0,r.useState)((null===a||void 0===a?void 0:a.has_steps)?"yes":(null===a||void 0===a?void 0:a.step_status_unknown)?"unknown":"no"),[c,d]=(0,r.useState)((null===a||void 0===a?void 0:a.step_description)||""),[u,p]=(0,r.useState)((null===a||void 0===a?void 0:a.door_width_inches)||36),[_,v]=(0,r.useState)((null===a||void 0===a?void 0:a.door_type)||"automatic"),[m,b]=(0,r.useState)((null===a||void 0===a?void 0:a.doorway_notes)||"");return(0,o.jsxs)(ne.Z,{spacing:4,children:[(0,o.jsx)(G.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,o.jsxs)(ne.Z,{spacing:3,children:[(0,o.jsxs)(h.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(me.Z,{color:"primary"}),"Entrance Steps"]}),(0,o.jsxs)(ce.Z,{component:"fieldset",children:[(0,o.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,children:"Are there steps at the entrance?"}),(0,o.jsxs)(de.Z,{value:s,onChange:e=>l(e.target.value),children:[(0,o.jsx)(ue.Z,{value:"no",control:(0,o.jsx)(he.Z,{}),label:"No steps (level entrance)"}),(0,o.jsx)(ue.Z,{value:"yes",control:(0,o.jsx)(he.Z,{}),label:"Yes, has steps"}),(0,o.jsx)(ue.Z,{value:"unknown",control:(0,o.jsx)(he.Z,{}),label:"I don't know"})]})]}),"yes"===s&&(0,o.jsx)(oe.Z,{label:"Describe the steps",value:c,onChange:e=>d(e.target.value),multiline:!0,rows:2,fullWidth:!0,placeholder:"e.g., '2 steps at entrance, each about 6 inches high'"})]})}),(0,o.jsx)(_e.Z,{}),(0,o.jsx)(G.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,o.jsxs)(ne.Z,{spacing:3,children:[(0,o.jsxs)(h.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(be.Z,{color:"primary"}),"Doorway Details"]}),(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,children:"Door Width (in inches)"}),(0,o.jsx)(ve.ZP,{value:u,onChange:(e,t)=>p(t),min:24,max:42,step:1,marks:fe,valueLabelDisplay:"on",valueLabelFormat:e=>"".concat(e,'"')}),(0,o.jsx)(h.Z,{variant:"body2",color:u>=32?"success.main":"warning.main",sx:{mt:1},children:u>=36?"\u2728 Excellent accessibility":u>=32?"\u2713 Meets accessibility standards":"\u26a0\ufe0f Below accessibility standards"})]}),(0,o.jsxs)(ce.Z,{component:"fieldset",children:[(0,o.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,children:"Door Type"}),(0,o.jsxs)(de.Z,{value:_,onChange:e=>v(e.target.value),children:[(0,o.jsx)(ue.Z,{value:"automatic",control:(0,o.jsx)(he.Z,{}),label:(0,o.jsxs)(ne.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,o.jsx)(xe.Z,{}),(0,o.jsx)("span",{children:"Automatic door"})]})}),(0,o.jsx)(ue.Z,{value:"manual_easy",control:(0,o.jsx)(he.Z,{}),label:"Manual door (easy to open)"}),(0,o.jsx)(ue.Z,{value:"manual_heavy",control:(0,o.jsx)(he.Z,{}),label:"Manual door (heavy/requires force)"})]})]}),(0,o.jsx)(oe.Z,{label:"Additional doorway notes",value:m,onChange:e=>b(e.target.value),multiline:!0,rows:2,fullWidth:!0,placeholder:"e.g., 'Push button available, door stays open for 10 seconds'"})]})}),(0,o.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,o.jsx)(se.Z,{onClick:n,children:"Back"}),(0,o.jsx)(se.Z,{variant:"contained",onClick:()=>{var e;t({has_steps:"yes"===s,step_status_unknown:"unknown"===s,step_description:c,door_width:(e=u,e>=36?"wide":e>=32?"standard":"narrow"),door_width_inches:u,door_type:_,doorway_notes:m})},children:"Next"})]})]})}var ye=n(4784);function we(e){let{data:t,onBack:n,onSubmit:r,mode:a="create"}=e;var s;return(0,o.jsxs)(ne.Z,{spacing:3,children:[(0,o.jsx)(h.Z,{variant:"body1",color:"text.secondary",children:"Please review the information before submitting."}),(0,o.jsx)(G.Z,{sx:{p:3,borderRadius:2},children:(0,o.jsxs)(ne.Z,{spacing:3,children:[(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Location Name"}),(0,o.jsx)(h.Z,{variant:"body1",children:t.name})]}),(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Address"}),(0,o.jsxs)(h.Z,{variant:"body1",children:[t.address,t.unit&&" (".concat(t.unit,")")]})]}),(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Accessibility Level"}),(0,o.jsx)(ye.Z,{label:t.accessibility_level||"Not specified",color:"high"===t.accessibility_level?"success":"medium"===t.accessibility_level?"warning":"error",sx:{textTransform:"capitalize"}})]}),t.description&&(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Description"}),(0,o.jsx)(h.Z,{variant:"body1",children:t.description})]}),(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Entrance Details"}),(0,o.jsxs)(ne.Z,{spacing:1,children:[(0,o.jsxs)(h.Z,{variant:"body1",children:["\u2022 Steps: ".concat(t.step_status_unknown?"Unknown":t.has_steps?"Yes":"No"),t.step_description&&" - ".concat(t.step_description)]}),(0,o.jsx)(h.Z,{variant:"body1",children:"\u2022 Door Width: ".concat(t.door_width_inches,'" (').concat(t.door_width,")")}),(0,o.jsx)(h.Z,{variant:"body1",sx:{textTransform:"capitalize"},children:"\u2022 Door Type: ".concat(null===(s=t.door_type)||void 0===s?void 0:s.replace("_"," "))}),t.doorway_notes&&(0,o.jsx)(h.Z,{variant:"body1",children:"\u2022 Notes: ".concat(t.doorway_notes)})]})]})]})}),(0,o.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,o.jsx)(se.Z,{onClick:n,children:"Back"}),(0,o.jsx)(se.Z,{variant:"contained",onClick:r,color:"primary",children:"create"===a?"Submit Location":"Save Changes"})]})]})}const Ze=[{label:"Basic Info",description:"Location details"},{label:"Accessibility",description:"Accessibility features"},{label:"Entrance",description:"Entrance information"},{label:"Review",description:"Review and submit"}];function je(e){let{open:t,onClose:n,onSubmit:a,initialData:s,mode:l="create"}=e;const[c,d]=(0,r.useState)(0),[_,v]=(0,r.useState)(s||{}),m=e=>{v((t=>({...t,...e}))),d((e=>e+1))},b=()=>{d((e=>e-1))},x=()=>{d(0),v({}),n()},f=(c+1)/Ze.length*100;return(0,o.jsx)(u.Z,{open:t,onClose:x,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",borderRadius:2,background:"linear-gradient(to bottom, #1a1a1a, #2d2d2d)"}},children:(0,o.jsxs)(i.Z,{sx:{position:"relative"},children:[(0,o.jsxs)(i.Z,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider"},children:[(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:Ze[c].label}),(0,o.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:Ze[c].description})]}),(0,o.jsx)(p.Z,{onClick:x,sx:{color:"text.secondary"},children:(0,o.jsx)(te.Z,{})})]}),(0,o.jsx)(H,{variant:"determinate",value:f,sx:{height:4,bgcolor:"rgba(255,255,255,0.1)"}}),(0,o.jsx)(G.Z,{elevation:0,sx:{p:3,bgcolor:"transparent",borderBottom:"1px solid",borderColor:"divider"},children:(0,o.jsx)(Q.Z,{activeStep:c,alternativeLabel:!0,sx:{"& .MuiStepLabel-label":{color:"text.secondary","&.Mui-active":{color:"primary.main",fontWeight:"bold"}},"& .MuiStepIcon-root":{color:"action.disabled","&.Mui-active":{color:"primary.main"},"&.Mui-completed":{color:"primary.dark"}}},children:Ze.map((e=>(0,o.jsx)($.Z,{children:(0,o.jsx)(K.Z,{children:e.label})},e.label)))})}),(0,o.jsx)(ee.Z,{sx:{p:4},children:(0,o.jsxs)(i.Z,{sx:{maxWidth:600,mx:"auto"},children:[0===c&&(0,o.jsx)(le,{onNext:m,initialData:_}),1===c&&(0,o.jsx)(pe,{onNext:m,onBack:b,initialData:_}),2===c&&(0,o.jsx)(ge,{onNext:m,onBack:b,initialData:_}),3===c&&(0,o.jsx)(we,{data:_,onBack:b,onSubmit:()=>a(_),mode:l})]})})]})})}function ke(e){let{location:t}=e;const n=(0,a.useRouter)(),[s,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je,{open:u,onClose:()=>{h(!1),n.push("/admin")},onSubmit:async e=>{try{if(!e.name)return c("Location name is required"),!1;var o,r,a,i,s,l,u,p,_,v,m,b,x,f,g,y,w,Z;const j={name:e.name,address:e.address||t.address||"",unit:e.unit||t.unit||"",latitude:null!==(o=e.latitude)&&void 0!==o?o:t.latitude,longitude:null!==(r=e.longitude)&&void 0!==r?r:t.longitude,accessibility_level:e.accessibility_level||t.accessibility_level||"medium",accessibility_status_unknown:null!==(a=e.accessibility_status_unknown)&&void 0!==a?a:t.accessibility_status_unknown,description:e.description||t.description||"",has_steps:null!==(i=e.has_steps)&&void 0!==i?i:t.has_steps,step_status_unknown:null!==(s=e.step_status_unknown)&&void 0!==s?s:t.step_status_unknown,step_description:e.step_description||t.step_description||"",door_width:e.door_width||t.door_width||"standard",door_width_inches:null!==(l=e.door_width_inches)&&void 0!==l?l:t.door_width_inches,door_type:e.door_type||t.door_type||"manual_easy",doorway_notes:e.doorway_notes||t.doorway_notes||"",has_elevator:null!==(u=e.has_elevator)&&void 0!==u?u:t.has_elevator,has_wide_pathways:null!==(p=e.has_wide_pathways)&&void 0!==p?p:t.has_wide_pathways,floor_type:e.floor_type||t.floor_type||"smooth",interior_notes:e.interior_notes||t.interior_notes||"",has_accessible_parking:null!==(_=e.has_accessible_parking)&&void 0!==_?_:t.has_accessible_parking,parking_type:e.parking_type||t.parking_type||"none",parking_status_unknown:null!==(v=e.parking_status_unknown)&&void 0!==v?v:t.parking_status_unknown,has_loading_zone:null!==(m=e.has_loading_zone)&&void 0!==m?m:t.has_loading_zone,parking_notes:e.parking_notes||t.parking_notes||"",has_restroom:null!==(b=e.has_restroom)&&void 0!==b?b:t.has_restroom,restroom_unknown:null!==(x=e.restroom_unknown)&&void 0!==x?x:t.restroom_unknown,is_restroom_accessible:null!==(f=e.is_restroom_accessible)&&void 0!==f?f:t.is_restroom_accessible,restroom_status_unknown:null!==(g=e.restroom_status_unknown)&&void 0!==g?g:t.restroom_status_unknown,restroom_notes:e.restroom_notes||t.restroom_notes||"",is_dog_friendly:null!==(y=e.is_dog_friendly)&&void 0!==y?y:t.is_dog_friendly,dog_friendly_unknown:null!==(w=e.dog_friendly_unknown)&&void 0!==w?w:t.dog_friendly_unknown,dog_friendly_status_unknown:null!==(Z=e.dog_friendly_status_unknown)&&void 0!==Z?Z:t.dog_friendly_status_unknown,dog_features:e.dog_features||t.dog_features||""};return await(0,d.XY)(t.id.toString(),j),h(!1),n.push("/admin"),!0}catch(j){return console.error("Error updating location:",j),c("Failed to update location"),!1}},initialData:t,mode:"edit"}),s&&(0,o.jsx)(i.Z,{sx:{mt:2},children:(0,o.jsx)(l.Z,{severity:"error",onClose:()=>c(null),children:s})})]})}function Se(e){let{location:t}=e;const n=(0,a.useRouter)(),[s,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je,{open:d,onClose:()=>{u(!1),n.push("/admin")},onSubmit:async e=>{try{if(!e.name)return c("Location name is required"),!1;var o,r,a,i,s,l,d,h,p,_,v,m,b,x,f,g,y,w;e.name,e.address||t.address,e.unit||t.unit,null!==(o=e.latitude)&&void 0!==o||t.latitude,null!==(r=e.longitude)&&void 0!==r||t.longitude,e.accessibility_level||t.accessibility_level,null!==(a=e.accessibility_status_unknown)&&void 0!==a||t.accessibility_status_unknown,e.description||t.description,null!==(i=e.has_steps)&&void 0!==i||t.has_steps,null!==(s=e.step_status_unknown)&&void 0!==s||t.step_status_unknown,e.step_description||t.step_description,e.door_width||t.door_width,null!==(l=e.door_width_inches)&&void 0!==l||t.door_width_inches,e.door_type||t.door_type,e.doorway_notes||t.doorway_notes,null!==(d=e.has_elevator)&&void 0!==d||t.has_elevator,null!==(h=e.has_wide_pathways)&&void 0!==h||t.has_wide_pathways,e.floor_type||t.floor_type,e.interior_notes||t.interior_notes,null!==(p=e.has_accessible_parking)&&void 0!==p||t.has_accessible_parking,e.parking_type||t.parking_type,null!==(_=e.parking_status_unknown)&&void 0!==_||t.parking_status_unknown,null!==(v=e.has_loading_zone)&&void 0!==v||t.has_loading_zone,e.parking_notes||t.parking_notes,null!==(m=e.has_restroom)&&void 0!==m||t.has_restroom,null!==(b=e.restroom_unknown)&&void 0!==b||t.restroom_unknown,null!==(x=e.is_restroom_accessible)&&void 0!==x||t.is_restroom_accessible,null!==(f=e.restroom_status_unknown)&&void 0!==f||t.restroom_status_unknown,e.restroom_notes||t.restroom_notes,null!==(g=e.is_dog_friendly)&&void 0!==g||t.is_dog_friendly,null!==(y=e.dog_friendly_unknown)&&void 0!==y||t.dog_friendly_unknown,null!==(w=e.dog_friendly_status_unknown)&&void 0!==w||t.dog_friendly_status_unknown,e.dog_features||t.dog_features;return await function(e,t){throw new Error("Function not implemented.")}(t.id.toString()),u(!1),n.push("/admin"),!0}catch(Z){return console.error("Error updating pending location:",Z),c("Failed to update pending location"),!1}},initialData:t,mode:"edit"}),s&&(0,o.jsx)(i.Z,{sx:{mt:2},children:(0,o.jsx)(l.Z,{severity:"error",onClose:()=>c(null),children:s})})]})}function Ce(e){let{params:t}=e;const[n,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[_,v]=(0,r.useState)(null),m=(0,a.useRouter)();return(0,r.useEffect)((()=>{(async()=>{try{p(!0),v(null);const e=await(0,d.Hm)(t.id);u(e)}catch(_){const t=_ instanceof Error?_.message:"Failed to load location";console.error("Error loading location:",_),v(t),"Location not found"===t&&setTimeout((()=>m.push("/admin")),3e3)}finally{p(!1)}})()}),[t.id,m]),h?(0,o.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,o.jsx)(s.Z,{})}):_?(0,o.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,o.jsx)(l.Z,{severity:"error",sx:{maxWidth:400},children:_})}):n?(0,o.jsx)(i.Z,{sx:{p:3,maxWidth:1200,mx:"auto"},children:(0,c.E)(n)?(0,o.jsx)(ke,{location:n}):(0,c.C)(n)?(0,o.jsx)(Se,{location:n}):null}):null}},6612:function(e,t,n){"use strict";n.d(t,{Dx:function(){return c},Hm:function(){return s},RU:function(){return a},XY:function(){return l},z4:function(){return i}});const o="https://vklckuwinkmvefztvawp.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrbGNrdXdpbmttdmVmenR2YXdwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMzg0OTc3NywiZXhwIjoyMDQ5NDI1Nzc3fQ.jIoUbi5DwqIMtpCuQxybgN4SZ74MAfXi5kr7sLkxMY4";const a=(0,n(9377).eI)(o,r,{db:{schema:"public"}});async function i(){try{const{data:e,error:t}=await a.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("status","approved").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching locations:",t),t;return(null===e||void 0===e?void 0:e.map((e=>{var t;return{...e,photos:(null===(t=e.location_photos)||void 0===t?void 0:t.map((e=>e.url)))||[]}})))||[]}catch(e){throw console.error("Error in fetchLocations:",e),e}}async function s(e){try{var t;const{data:n,error:o}=await a.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("id",e).single();if(o)throw o;if(!n)throw new Error("Location not found");return{...n,photos:(null===(t=n.location_photos)||void 0===t?void 0:t.map((e=>e.url)))||[]}}catch(n){throw console.error("Error fetching location:",n),n}}async function l(e,t){try{const{photos:n,location_photos:o,...r}=t,{error:i}=await a.from("locations").update(r).eq("id",e).eq("status","approved");if(i)throw i;return!0}catch(n){throw console.error("Error updating location:",n),n}}async function c(e){try{const{data:t,error:n}=await a.from("pending_locations").insert([{...e,status:"pending",submitted_at:(new Date).toISOString()}]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error adding location:",t),t}}},9309:function(e,t,n){"use strict";var o=n(891);t.Z=void 0;var r=o(n(9438)),a=n(3827);t.Z=(0,r.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},2177:function(e,t,n){"use strict";function o(e){return"approved"===e.status}function r(e){return"pending"===e.status}n.d(t,{C:function(){return r},E:function(){return o}})}},function(e){e.O(0,[304,653,682,373,883,275,769,577,971,69,744],(function(){return t=1615,e(e.s=t);var t}));var t=e.O();_N_E=t}]);