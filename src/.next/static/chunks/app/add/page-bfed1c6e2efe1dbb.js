(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{8372:function(e,t,n){Promise.resolve().then(n.bind(n,6535))},6535:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var s=n(3827),a=n(4090),i=n(7907),o=n(304),r=n(4598),l=n(470),c=n(3206),d=n(9835),u=n(592),h=n(2757),x=n(7605),p=n(36),v=n(512),j=n(7147),Z=n(9969),b=n(6285),m=n(4181),y=n(895),g=n(3894),f=n(8883),w=n(5211),k=n(144),_=n(3995),C=n(9468);function S(e){let{onNext:t,onBack:n,initialData:i}=e;const[r,c]=(0,a.useState)((null===i||void 0===i?void 0:i.name)||""),[u,h]=(0,a.useState)(""),[x,p]=(0,a.useState)((null===i||void 0===i?void 0:i.address)||""),[v,j]=(0,a.useState)((null===i||void 0===i?void 0:i.unit)||""),[Z,m]=(0,a.useState)((null===i||void 0===i?void 0:i.latitude)||null),[S,I]=(0,a.useState)((null===i||void 0===i?void 0:i.longitude)||null),[B,N]=(0,a.useState)([]),[D,R]=(0,a.useState)(!1),[E,W]=(0,a.useState)(!1),[A,P]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=setTimeout((async()=>{if(!u||u.length<3)return void N([]);const e="pk.eyJ1IjoiYWRhYWxyZWFkeWxvY2F0aW9ucyIsImEiOiJjbTRpcms1ODEwNWN2MmlwejJsZnRwbTh1In0.h1-mYaPDVZPGrUrJYEfaCA";W(!0),P(null);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(u),".json?")+"access_token=".concat(e,"&")+"types=address,poi&country=us,pr,as,gu,mp,vi&limit=5");if(!t.ok)throw new Error("Search failed");const n=await t.json();N(n.features||[]),R(!0)}catch(t){console.error("Error searching locations:",t),P("Search failed. Please try again."),N([])}finally{W(!1)}}),300);return()=>clearTimeout(e)}),[u]);return(0,s.jsxs)(y.Z,{spacing:4,children:[A&&(0,s.jsx)(g.Z,{severity:"error",onClose:()=>P(null),children:A}),(0,s.jsx)(f.Z,{label:"Location Name",value:r,onChange:e=>c(e.target.value),fullWidth:!0,required:!0,placeholder:"e.g., Central Park Visitor Center"}),(0,s.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,s.jsx)(f.Z,{label:"Search Address",value:u,onChange:e=>h(e.target.value),fullWidth:!0,placeholder:"Start typing to search...",InputProps:{endAdornment:E&&(0,s.jsx)(w.Z,{size:20})}}),D&&B.length>0&&(0,s.jsx)(l.Z,{sx:{position:"absolute",top:"100%",left:0,right:0,mt:1,maxHeight:300,overflow:"auto",zIndex:1e3,borderRadius:1,boxShadow:3},children:(0,s.jsx)(k.Z,{children:B.map((e=>(0,s.jsx)(_.ZP,{onClick:()=>(e=>{p(e.place_name),m(e.center[1]),I(e.center[0]),h(""),R(!1)})(e),sx:{py:2,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},children:(0,s.jsx)(C.Z,{primary:e.place_name})},e.id)))})})]}),x&&(0,s.jsxs)(l.Z,{sx:{p:3,bgcolor:"background.default",borderRadius:2},children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Selected Address"}),(0,s.jsx)(d.Z,{variant:"body1",gutterBottom:!0,children:x}),(0,s.jsx)(f.Z,{label:"Unit/Suite (Optional)",value:v,onChange:e=>j(e.target.value),fullWidth:!0,sx:{mt:2},placeholder:"e.g., Apt 4B, Suite 200"})]}),(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[n&&(0,s.jsx)(b.Z,{onClick:n,children:"Back"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{r.trim()?x.trim()?Z&&S?t({name:r,address:x,unit:v,latitude:Z,longitude:S}):P("Please select a valid address from the suggestions"):P("Please select an address"):P("Please enter a location name")},disabled:!r||!x||!Z||!S,children:"Next"})]})]})}var I=n(1848),B=n(6245),N=n(7640),D=n(8148);function R(e){let{onNext:t,onBack:n,initialData:i}=e;const[r,l]=(0,a.useState)((null===i||void 0===i?void 0:i.accessibility_level)||"high"),[c,u]=(0,a.useState)((null===i||void 0===i?void 0:i.description)||"");return(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsx)(d.Z,{variant:"body1",color:"text.secondary",children:"Tell us about the accessibility features of this location."}),(0,s.jsxs)(I.Z,{component:"fieldset",children:[(0,s.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Overall Accessibility Level"}),(0,s.jsxs)(B.Z,{value:r,onChange:e=>l(e.target.value),children:[(0,s.jsx)(N.Z,{value:"high",control:(0,s.jsx)(D.Z,{}),label:"Fully accessible (no barriers)"}),(0,s.jsx)(N.Z,{value:"medium",control:(0,s.jsx)(D.Z,{}),label:"Partially accessible (some barriers)"}),(0,s.jsx)(N.Z,{value:"low",control:(0,s.jsx)(D.Z,{}),label:"Limited accessibility (significant barriers)"})]})]}),(0,s.jsx)(f.Z,{label:"Accessibility Description",value:c,onChange:e=>u(e.target.value),multiline:!0,rows:3,fullWidth:!0,placeholder:"Describe the accessibility features (e.g., ramps, automatic doors, etc.)"}),(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,s.jsx)(b.Z,{onClick:n,children:"Back"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{t({accessibility_level:r,description:c})},children:"Next"})]})]})}var E=n(8416),W=n(4059),A=n(8503),P=n(1690),L=n(4065);const M=[{value:24,label:'24"'},{value:32,label:'32"'},{value:36,label:'36"'},{value:42,label:'42"'}];function T(e){let{onNext:t,onBack:n,initialData:i}=e;const[r,c]=(0,a.useState)((null===i||void 0===i?void 0:i.has_steps)?"yes":(null===i||void 0===i?void 0:i.step_status_unknown)?"unknown":"no"),[u,h]=(0,a.useState)((null===i||void 0===i?void 0:i.step_description)||""),[x,p]=(0,a.useState)(36),[v,j]=(0,a.useState)("automatic"),[Z,m]=(0,a.useState)("");return(0,s.jsxs)(y.Z,{spacing:4,children:[(0,s.jsx)(l.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(d.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(A.Z,{color:"primary"}),"Entrance Steps"]}),(0,s.jsxs)(I.Z,{component:"fieldset",children:[(0,s.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Are there steps at the entrance?"}),(0,s.jsxs)(B.Z,{value:r,onChange:e=>c(e.target.value),children:[(0,s.jsx)(N.Z,{value:"no",control:(0,s.jsx)(D.Z,{}),label:"No steps (level entrance)"}),(0,s.jsx)(N.Z,{value:"yes",control:(0,s.jsx)(D.Z,{}),label:"Yes, has steps"}),(0,s.jsx)(N.Z,{value:"unknown",control:(0,s.jsx)(D.Z,{}),label:"I don't know"})]})]}),"yes"===r&&(0,s.jsx)(f.Z,{label:"Describe the steps",value:u,onChange:e=>h(e.target.value),multiline:!0,rows:2,fullWidth:!0,placeholder:"e.g., '2 steps at entrance, each about 6 inches high'"})]})}),(0,s.jsx)(E.Z,{}),(0,s.jsx)(l.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(d.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(P.Z,{color:"primary"}),"Doorway Details"]}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Door Width (in inches)"}),(0,s.jsx)(W.ZP,{value:x,onChange:(e,t)=>p(t),min:24,max:42,step:1,marks:M,valueLabelDisplay:"on",valueLabelFormat:e=>"".concat(e,'"')}),(0,s.jsx)(d.Z,{variant:"body2",color:x>=32?"success.main":"warning.main",sx:{mt:1},children:x>=36?"\u2728 Excellent accessibility":x>=32?"\u2713 Meets accessibility standards":"\u26a0\ufe0f Below accessibility standards"})]}),(0,s.jsxs)(I.Z,{component:"fieldset",children:[(0,s.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Door Type"}),(0,s.jsxs)(B.Z,{value:v,onChange:e=>j(e.target.value),children:[(0,s.jsx)(N.Z,{value:"automatic",control:(0,s.jsx)(D.Z,{}),label:(0,s.jsxs)(y.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,s.jsx)(L.Z,{}),(0,s.jsx)("span",{children:"Automatic door"})]})}),(0,s.jsx)(N.Z,{value:"manual_easy",control:(0,s.jsx)(D.Z,{}),label:"Manual door (easy to open)"}),(0,s.jsx)(N.Z,{value:"manual_heavy",control:(0,s.jsx)(D.Z,{}),label:"Manual door (heavy/requires force)"})]})]}),(0,s.jsx)(f.Z,{label:"Additional doorway notes",value:Z,onChange:e=>m(e.target.value),multiline:!0,rows:2,fullWidth:!0,placeholder:"e.g., 'Push button available, door stays open for 10 seconds'"})]})}),(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,s.jsx)(b.Z,{onClick:n,children:"Back"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{var e;t({has_steps:"yes"===r,step_status_unknown:"unknown"===r,step_description:u,door_width:(e=x,e>=36?"wide":e>=32?"standard":"narrow"),door_width_inches:x,door_type:v,doorway_notes:Z})},children:"Next"})]})]})}var z=n(4944),Y=n(3433),O=n(9655),J=n(9269);function U(e){let{onNext:t,onBack:n,initialData:i}=e;const[r,c]=(0,a.useState)((null===i||void 0===i?void 0:i.has_elevator)||!1);var u;const[h,x]=(0,a.useState)(null===(u=null===i||void 0===i?void 0:i.has_wide_pathways)||void 0===u||u),[p,v]=(0,a.useState)((null===i||void 0===i?void 0:i.floor_type)||"smooth"),[j,Z]=(0,a.useState)((null===i||void 0===i?void 0:i.interior_notes)||"");return(0,s.jsxs)(y.Z,{spacing:4,children:[(0,s.jsx)(l.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(d.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(Y.Z,{color:"primary"}),"Elevator Access"]}),(0,s.jsx)(N.Z,{control:(0,s.jsx)(z.Z,{checked:r,onChange:e=>c(e.target.checked),color:"primary"}),label:"Has elevator (for multi-level buildings)"})]})}),(0,s.jsx)(l.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(d.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(O.Z,{color:"primary"}),"Pathway Width"]}),(0,s.jsx)(N.Z,{control:(0,s.jsx)(z.Z,{checked:h,onChange:e=>x(e.target.checked),color:"primary"}),label:"Wide pathways throughout"}),(0,s.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Wide pathways allow easy navigation for wheelchairs and mobility devices"})]})}),(0,s.jsx)(l.Z,{elevation:2,sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(d.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(J.Z,{color:"primary"}),"Floor Type"]}),(0,s.jsx)(I.Z,{component:"fieldset",children:(0,s.jsxs)(B.Z,{value:p,onChange:e=>v(e.target.value),children:[(0,s.jsx)(N.Z,{value:"smooth",control:(0,s.jsx)(D.Z,{}),label:"Smooth (hardwood, tile, etc.)"}),(0,s.jsx)(N.Z,{value:"carpet",control:(0,s.jsx)(D.Z,{}),label:"Low-pile carpet"}),(0,s.jsx)(N.Z,{value:"uneven",control:(0,s.jsx)(D.Z,{}),label:"Uneven surface"})]})}),(0,s.jsx)(f.Z,{label:"Additional interior notes",value:j,onChange:e=>Z(e.target.value),multiline:!0,rows:3,fullWidth:!0,placeholder:"e.g., 'Some narrow spots in back area, good turning space in main area'"})]})}),(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,s.jsx)(b.Z,{onClick:n,children:"Back"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{t({has_elevator:r,has_wide_pathways:h,floor_type:p,interior_notes:j})},children:"Next"})]})]})}var q=n(4784);function X(e){let{data:t,onBack:n,onSubmit:a,mode:i="create",disabled:r=!1}=e;var c;return(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsx)(d.Z,{variant:"body1",color:"text.secondary",children:"Please review the information before submitting."}),(0,s.jsx)(l.Z,{sx:{p:3,borderRadius:2},children:(0,s.jsxs)(y.Z,{spacing:3,children:[(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Location Name"}),(0,s.jsx)(d.Z,{variant:"body1",children:t.name})]}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Address"}),(0,s.jsxs)(d.Z,{variant:"body1",children:[t.address,t.unit&&" (".concat(t.unit,")")]})]}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Accessibility Level"}),(0,s.jsx)(q.Z,{label:t.accessibility_level||"Not specified",color:"high"===t.accessibility_level?"success":"medium"===t.accessibility_level?"warning":"error",sx:{textTransform:"capitalize"}})]}),t.description&&(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Description"}),(0,s.jsx)(d.Z,{variant:"body1",children:t.description})]}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Entrance Details"}),(0,s.jsxs)(y.Z,{spacing:1,children:[(0,s.jsxs)(d.Z,{variant:"body1",children:["\u2022 Steps: ".concat(t.step_status_unknown?"Unknown":t.has_steps?"Yes":"No"),t.step_description&&" - ".concat(t.step_description)]}),(0,s.jsxs)(d.Z,{variant:"body1",children:["\u2022 Door Width: ","".concat(t.door_width_inches,'" (').concat(t.door_width,")")]}),(0,s.jsxs)(d.Z,{variant:"body1",sx:{textTransform:"capitalize"},children:["\u2022 Door Type: ",null===(c=t.door_type)||void 0===c?void 0:c.replace("_"," ")]}),t.doorway_notes&&(0,s.jsxs)(d.Z,{variant:"body1",children:["\u2022 Notes: ",t.doorway_notes]})]})]})]})}),(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,s.jsx)(b.Z,{onClick:n,disabled:r,children:"Back"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:a,color:"primary",disabled:r,children:"create"===i?"Submit Location":"Save Changes"})]})]})}var F=n(8745),V=n(8545),H=n(624);function G(e){let{open:t,onClose:n}=e;const a=(0,i.useRouter)();return(0,s.jsx)(p.Z,{open:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,bgcolor:"background.paper",backgroundImage:"none",overflow:"hidden",position:"relative"}},children:(0,s.jsxs)(j.Z,{sx:{textAlign:"center",py:6,px:4},children:[(0,s.jsx)(F.M,{children:(0,s.jsx)(V.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20},children:(0,s.jsx)(H.Z,{sx:{fontSize:80,color:"success.main",mb:3,filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.2))"}})})}),(0,s.jsxs)(V.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,s.jsx)(d.Z,{variant:"h4",gutterBottom:!0,children:"Thank You! \ud83c\udf89"}),(0,s.jsx)(d.Z,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Your location has been successfully submitted and will be reviewed by our team."})]}),(0,s.jsxs)(o.Z,{sx:{mt:4,display:"flex",gap:2,justifyContent:"center"},children:[(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{a.push("/"),n()},sx:{px:4,py:1.5,borderRadius:2,boxShadow:e=>"0 4px 20px ".concat(e.palette.primary.main,"40")},children:"View Map"}),(0,s.jsx)(b.Z,{variant:"outlined",onClick:()=>{a.refresh(),n()},sx:{px:4,py:1.5,borderRadius:2},children:"Add Another Location"})]})]})})}var Q=n(6612);const K=[{label:"Basic Info",description:"Location details"},{label:"Accessibility",description:"Overall accessibility"},{label:"Entrance",description:"Steps and doors"},{label:"Interior",description:"Inside features"},{label:"Review",description:"Review and submit"}];function $(){const e=(0,i.useRouter)(),[t,n]=(0,a.useState)(0),[y,g]=(0,a.useState)({}),[f,w]=(0,a.useState)(!1),[k,_]=(0,a.useState)(!1),C=e=>{g((t=>({...t,...e}))),n((e=>e+1)),window.scrollTo({top:0,behavior:"smooth"})},I=()=>{n((e=>e-1)),window.scrollTo({top:0,behavior:"smooth"})};return(0,s.jsxs)(o.Z,{sx:{minHeight:"100vh",width:"100vw",bgcolor:"background.default",pt:2},children:[(0,s.jsxs)(r.Z,{maxWidth:"lg",children:[(0,s.jsxs)(l.Z,{sx:{p:3,mb:3,borderRadius:2,display:"flex",alignItems:"center",gap:2},children:[(0,s.jsx)(c.Z,{onClick:()=>w(!0),sx:{color:"text.secondary"},children:(0,s.jsx)(m.Z,{})}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{variant:"h5",gutterBottom:!0,children:"Add New Location"}),(0,s.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:K[t].description})]})]}),(0,s.jsx)(l.Z,{sx:{p:3,mb:4,borderRadius:2},children:(0,s.jsx)(u.Z,{activeStep:t,alternativeLabel:!0,sx:{"& .MuiStepLabel-label":{mt:1,color:"text.secondary","&.Mui-active":{color:"primary.main",fontWeight:"bold"}}},children:K.map((e=>(0,s.jsx)(h.Z,{children:(0,s.jsx)(x.Z,{children:e.label})},e.label)))})}),(0,s.jsxs)(l.Z,{sx:{p:4,borderRadius:2,maxWidth:800,mx:"auto",mb:4},children:[0===t&&(0,s.jsx)(S,{onNext:C,initialData:y}),1===t&&(0,s.jsx)(R,{onNext:C,onBack:I,initialData:y}),2===t&&(0,s.jsx)(T,{onNext:C,onBack:I,initialData:y}),3===t&&(0,s.jsx)(U,{onNext:C,onBack:I,initialData:y}),4===t&&(0,s.jsx)(X,{data:y,onBack:I,onSubmit:async()=>{try{await(0,Q.Dx)(y),_(!0)}catch(e){console.error("Error submitting location:",e)}}})]})]}),(0,s.jsxs)(p.Z,{open:f,onClose:()=>w(!1),PaperProps:{sx:{borderRadius:2}},children:[(0,s.jsx)(v.Z,{children:"Exit Location Wizard?"}),(0,s.jsx)(j.Z,{children:"Are you sure you want to exit? All your progress will be lost."}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(b.Z,{onClick:()=>w(!1),children:"Cancel"}),(0,s.jsx)(b.Z,{onClick:()=>e.push("/"),color:"error",children:"Exit"})]})]}),(0,s.jsx)(G,{open:k,onClose:()=>_(!1)})]})}},6612:function(e,t,n){"use strict";n.d(t,{Dx:function(){return c},Hm:function(){return r},RU:function(){return i},XY:function(){return l},z4:function(){return o}});const s="https://vklckuwinkmvefztvawp.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrbGNrdXdpbmttdmVmenR2YXdwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMzg0OTc3NywiZXhwIjoyMDQ5NDI1Nzc3fQ.jIoUbi5DwqIMtpCuQxybgN4SZ74MAfXi5kr7sLkxMY4";const i=(0,n(9377).eI)(s,a,{db:{schema:"public"}});async function o(){try{const{data:e,error:t}=await i.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("status","approved").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching locations:",t),t;return(null===e||void 0===e?void 0:e.map((e=>{var t;return{...e,photos:(null===(t=e.location_photos)||void 0===t?void 0:t.map((e=>e.url)))||[]}})))||[]}catch(e){throw console.error("Error in fetchLocations:",e),e}}async function r(e){try{var t;const{data:n,error:s}=await i.from("locations").select("\n        *,\n        location_photos (\n          id,\n          url,\n          storage_path\n        )\n      ").eq("id",e).single();if(s)throw s;if(!n)throw new Error("Location not found");return{...n,photos:(null===(t=n.location_photos)||void 0===t?void 0:t.map((e=>e.url)))||[]}}catch(n){throw console.error("Error fetching location:",n),n}}async function l(e,t){try{const{photos:n,location_photos:s,...a}=t,{error:o}=await i.from("locations").update(a).eq("id",e).eq("status","approved");if(o)throw o;return!0}catch(n){throw console.error("Error updating location:",n),n}}async function c(e){try{const{data:t,error:n}=await i.from("pending_locations").insert([{...e,status:"pending",submitted_at:(new Date).toISOString()}]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error adding location:",t),t}}}},function(e){e.O(0,[304,653,682,373,323,883,275,769,577,207,971,69,744],(function(){return t=8372,e(e.s=t);var t}));var t=e.O();_N_E=t}]);